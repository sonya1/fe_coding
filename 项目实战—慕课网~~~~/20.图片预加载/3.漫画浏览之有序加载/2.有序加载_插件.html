<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		*{
			margin:0;
			padding: 0;
		}
		.box{
			text-align: center;
		}
		.btn{
			display: inline-block;
			background: #fff;
			color:#333;
			padding:0 10px;
			height: 30px;
			line-height: 30px;
			text-decoration: none;
			border:1px solid #ccc;
			margin-right: 50px;
		}
		.btn:hover{
			background: #eee;
		}

		
	</style>
</head>
<body>
	<div class="box">
		<img src="http://i2.hoopchina.com.cn/user/308/15960308/13383588090.jpg" alt="pic" id="img" width="1200">
		<p>
			<a href="javascript:;" data-control="prev" class="btn">上一页</a>
			<a href="javascript:;" data-control="next" class="btn">下一页</a>
		</p>
	</div>

	
	<script src="../jquery.js"></script>
	<script src="../preload-2.0.js"></script>
	<script>

	//无序预加载
	$(function(){
		var imgs = [
			"http://i2.hoopchina.com.cn/user/308/15960308/13383588090.jpg",
			"http://img.article.pchome.net/00/44/23/20/pic_lib/wm/2.jpg",
			"http://lcd.yesky.com/imagelist/2009/044/404q4y8g4m0p.jpg",
			"http://lcd.yesky.com/imagelist/2009/044/cgro54wt2t2x.jpg"
			/*"http://59.53.67.165:8080/comicdata/12307/1/0.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/1.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/2.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/3.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/4.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/5.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/6.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/7.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/8.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/9.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/10.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/11.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/12.jpg",
			"http://59.53.67.165:8080/comicdata/12307/1/13.jpg"
			"http://59.53.67.165:8080/comicdata/12307/1/14.jpg"
			"http://59.53.67.165:8080/comicdata/12307/1/15.jpg"*/
		];
		
		var index=0,len = imgs.length;
		var count = 0;	
		/*function load(){
			var imgObj = new Image();
			$(imgObj).on("load error",function(){
				if(count>=len){
					//所有图片加载完成
				}else{
					load();
				}
					count++;
			});
			imgObj.src = imgs[count];
		}

		
		load();*/

		$.preload(imgs,{
			order:"order"
		});



		$(".btn").on("click",function(){
			if("prev" === $(this).data("control")){
				index--;
				if(index<0){
					index = len-1;
				}

				//index = Math.max(0,--index);
			}else{
				index++;
				if(index>len-1){
					index = 0;
				}
				//index = Math.min(len-1,++index);
			}
			$("#img").attr("src",imgs[index]);
			document.title = (index+1) +"/" + len;
		});


	});


	</script>
</body>
</html>