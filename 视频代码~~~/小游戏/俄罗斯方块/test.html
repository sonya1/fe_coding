<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>test</title>
</head>
<body>
	<script>
		

		//变形
		
		var sBlock = aBlock[iRand][index%aBlock[iRand].length].toString(2); //
		sBlock = new Array(17-sBlock.length).join("0") + sBlock;

		var aBlockMatrix = sBlock.match(/\d{4}/g);

		//找变形所在位置 4个块中的x，y坐标最小值，即为16格矩阵的头
		var iMinX = aBlockPos[0].x;
		var iMinY = aBlockPos[0].y;
		for(var i=1;i<4;i++){
			if(aBlockPos[i].x < iMinX){
				iMinX = aBlockPos[i].x;
			}
			if(aBlockPos[i].y < iMinY){
				iMinY = aBlockPos[i].y;
			}
		}

		aBlockPos = [];
		for(var i=0;i<4;i++){
			var sValue = aBlockMatrix[i];  //4个一组的二进制
			for(var j=0;j<sValue.length;j++){
				if(sValue.charAt(j) == "1"){
					aBlockPos.push({
						x:j+iMinX,
						y:i+iMinY
					});
				}
			}
		}

		for(var i=0;i<4;i++){
			oBoard.rows[aBlockPos[i].y].cells[aBlockPos[i].x].style.background="red";
		}


	</script>
</body>
</html>